{% load static %} {% include "includes/header.html" %} {% include "includes/subTask Sidebar.html" %}

<div class="content-wrapper bg-white">
    <div class="content container-fluid">
      <section class="content-header">
        <div class="row align-items-center">
          <div class="col">
            <h3 class="page-title">Project Gallery</h3>
            <ul class="breadcrumb">
              <li class="breadcrumb-item"><a href="{% url 'DashboardPage' %}">Dashboard</a></li>
              <li class="breadcrumb-item active">{{project_phases.phase.name}} Gallery</li>
            </ul>
          </div>
        </div>
      </section>
    </div>
    
    <section class="content">
      <div class="container-fluid">
        <section class="section project">
          <div class="row">
            <div class="card">
              <div class="card-body pt-3">
                <!-- Bordered Tabs -->
                <ul class="nav nav-tabs nav-tabs-bordered">

                  <li class="nav-item">
                    <button class="nav-link active" data-bs-toggle="tab"
                      data-bs-target="#profile-Proposed"></button>
                  </li>
                  {% for type in store_type_obj %}
                  <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#type-{{type.id}}">{{type.name}}</button>
                  </li>
                  {% endfor %}
                </ul>
                <div class="tab-content pt-2">
                    
                    <div class="tab-pane fade show active profile-Proposed" id="profile-Proposed">
                
                        <div class="container-xl">
                            <div class="row row-cards">
                                {% if project_images %}
                                {% for image in project_images %}
                              <div class="col-sm-6 col-lg-4">
                                <div class="card card-sm">
                                
                                    <div class="d-flex align-items-center">
                                       
                                        <img class="avatar me-3 rounded"
                                        src="{% static 'dist/img/user2-160x160.jpg' %}">
                                        <div>
                                          <div>{{image.user.user.first_name}} {{image.user.user.last_name}}</div>
                                          <div class="text-muted">{{image.date_created}}</div>
                                        </div>
                                      </div>
                                      <br>
                                  <a href="#" class="d-block"><img src="{% static image.output.url %}" class="card-img-top"></a>
                                  <div class="card-body">
                                    <div class="d-flex align-items-center">
                                      <div>
                                        <div>{{image.description}}</div>
                                      </div>
                                      <div class="ms-auto">
                                        <a href="#" class="text-muted">
                                          <!-- Download SVG icon from http://tabler-icons.io/i/eye -->
                                          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
                                          467
                                        </a>
                                        <a href="" class="ms-3 text-muted">
                                        {% if request.user in  image.viewUserLikes %}
                                          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="green" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                                          {% else %}
                                          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                                          {% endif %}
                                          {{image.numberLikes}}
                                        </a>
                                      </div>
                                    </div>
                                  </div>
                                </div>
    
                              </div>
                              {% endfor %}
                              {% endif %}
                            </div>
                          
                        </div>
                    </div>
                  {% for type in store_type_obj %}
                  <div class="tab-pane fade type-{{type.id}} pt-3" id="type-{{type.id}}">
                    <div class="row g-2 align-items-center">
                        
                        {% if perms.TaskManagement.add_projectstore %}
                        <h6 class=" card-subtitle mb-2 mt-3">
                          <div class="col-auto text-right ml-auto">
                            <a class="btn btn-primary bg-success-light mr-2" data-toggle="modal"
                              data-target="#modal-default_add_{{type.id}}" href="#edit_personal_details">
                              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M12 5l0 14" />
                                <path d="M5 12l14 0" />
                              </svg>
                              Create {{type.name}} photos
                            </a>
                          </div>
                        </h6>
                        
                        <div class="modal fade" id="modal-default_add_{{type.id}}">
                            <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h4 class="modal-title">Add Photo Information</h4>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                </div>
                                <div class="modal-body">
                                <form action="{% url 'galleryAdd' type.id project_info.id %}" enctype="multipart/form-data" method="POST">
                                    {% csrf_token %}
                    
                                    <div class="form-group">
                                    <label>description</label>
                                    <input type="text" name="description" value="{{tsk.name}}" class="form-control">
                                    </div>
                                    <div class="form-group">
                                    <label>Photo</label>
                                    <input type="file" name="photo" multiple class="form-control">
                                    </div>
                                    
                                    <div class="modal-footer justify-content-between">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                    <input type="submit" class="btn btn-primary" value="Save changes">
                                    </div>
                                </form>
                                </div>
                            </div>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                    <div class="container-xl">
                        <div class="row row-cards">
                            {% if project_images %}
                            {% for image in project_images %}
                            {% if image.storeType.id == type.id %}
                          <div class="col-sm-6 col-lg-4">
                            <div class="card card-sm">
                                
                                <div class="d-flex align-items-center">
                                   
                                    <img class="avatar me-3 rounded"
                                    src="{% static 'dist/img/user2-160x160.jpg' %}">
                                    <div>
                                      <div>{{image.user.user.first_name}} {{image.user.user.last_name}}</div>
                                      <div class="text-muted">{{image.date_created}}</div>
                                    </div>
                                  </div>
                                  <br>
                              <a href="#" class="d-block"><img src="{% static image.output.url %}" class="card-img-top"></a>
                              <div class="card-body">
                                <div class="d-flex align-items-center">
                                  <div>
                                    <div>{{image.description}}</div>
                                  </div>
                                  <div class="ms-auto">
                                    <a href="#" class="text-muted">
                                      <!-- Download SVG icon from http://tabler-icons.io/i/eye -->
                                      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
                                      467
                                    </a>
                                    <a href="{% url 'gallerylike'  type.id project_info.id %}" class="ms-3 text-muted">
                                    {% if request.user in  image.viewUserLikes %}
                                      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="green" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                                      {% else %}
                                      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" /></svg>
                                      {% endif %}
                                      {{image.numberLikes}}
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          {% endif %}
                          {% endfor %}
                          {% endif %}
                        </div>
                      
                    </div>
                    <!-- End Profile Edit Form -->

                  </div>
                  {% endfor %}

                </div><!-- End Bordered Tabs -->

              </div>
            </div>

          </div>
        </section>
      </div>
    </section>

  </div>

{% include "includes/footer.html" %}